script.

  var getUsername = function() {
    return getCookie('username') || getCookie('nickname');
  };

  var getUserKind = function() {
    return getCookie('userKind') || 'guest';
  }

  $( document ).ready(function() {
    // Inform the server we are good to go
    socket.emit('user loaded');

    // Request page state from the server.
    // Other parts of the page respond to the answers.
    console.log("requesting chat cache and up next");
    socket.emit('chat cache');
    socket.emit('up next');

    if (getUserKind().userKind === 'account') {
      console.log("requesting user data");
      socket.emit('preferences');
      socket.emit('playlists');
      socket.emit('user djing');
    }
  });

  // Server is asking who is present
  // TODO this probably isn't needed anymore
  socket.on('ping users', function() {
    socket.emit('user present');
  });
