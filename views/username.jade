script.

  var store_username = function(username) {
    set_cookie('username', username);
  }

  var store_username_color = function(color) {
    set_cookie('username_color', color);
  }

  // Any desired effects of the user changing username should go in here
  var update_username = function(username) {
    store_username(username);
    socket.emit('user update', username);
    $('#queue-label').text(username + "'s queue:");
  }

  var get_username = function() {
    return get_cookie('username');
  }

  var get_username_color = function() {
    return get_cookie('username_color');
  }

  // Username input box
  $('#auth').submit(function() {
    var username = $('#username').val();
    console.log('submitting username', username);
    update_username(username);
    $('#username').val('');
    return false;
  });

  // Document is loaded so cookies are probably ready. If the username cookie
  // is empty, the server will assign us a name, and we'll store it.
  $( document ).ready(function() {
    var user_info = {
      name: get_username(),
      color: get_username_color()
    }
    socket.emit('user loaded', user_info, function(assigned) {
      store_username(assigned.name);
      store_username_color(assigned.color);
      console.log('stored user info', assigned);
    });
  });

  // Server is asking who is present
  socket.on('ping users', function() {
    console.log('roll call', username);
    socket.emit('user present', get_username());
  });
